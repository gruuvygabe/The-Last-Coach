<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fitness Coach App</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== ORIGINAL STYLE (PRESERVED) ===== */
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto;
  margin: 0;
  background: linear-gradient(135deg, #FF6B35, #111);
  min-height: 100vh;
  color: #222;
}
.container {
  max-width: 1100px;
  margin: auto;
  padding: 20px;
}
.card {
  background: #fff;
  border-radius: 18px;
  padding: 25px;
  margin-bottom: 20px;
  box-shadow: 0 15px 40px rgba(0,0,0,.25);
}
h1, h2, h3 {
  color: #FF6B35;
}
input, select, textarea {
  width: 100%;
  padding: 12px;
  margin-top: 8px;
  border-radius: 10px;
  border: 2px solid #ddd;
}
button {
  background: #FF6B35;
  color: white;
  border: none;
  padding: 14px;
  border-radius: 12px;
  font-weight: 600;
  cursor: pointer;
  width: 100%;
}
button.secondary {
  background: #666;
}
.page { display: none; }
.page.active { display: block; }
.nav {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
}
.nav button {
  flex: 1;
  background: #eee;
}
.nav button.active {
  background: #FF6B35;
  color: #fff;
}
.small {
  font-size: 14px;
  color: #666;
}
.meal, .exercise {
  padding: 12px;
  background: #f8f9fa;
  border-radius: 12px;
  margin-bottom: 10px;
}
</style>
</head>

<body>
<div class="container">

<!-- ===== LOGIN ===== -->
<div id="loginPage" class="page active">
  <div class="card">
    <h1>Welcome Back</h1>
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">
    <button onclick="login()">Sign In / Create Account</button>
  </div>
</div>

<!-- ===== ONBOARDING ===== -->
<div id="onboardingPage" class="page">
  <div class="card" id="onboardingCard"></div>
</div>

<!-- ===== DASHBOARD ===== -->
<div id="dashboardPage" class="page">
  <div class="nav">
    <button onclick="switchTab('overview')" class="active">Overview</button>
    <button onclick="switchTab('photos')">Photos</button>
    <button onclick="switchTab('nutrition')">Nutrition</button>
    <button onclick="switchTab('workouts')">Workouts</button>
  </div>

  <div id="overview" class="card tab">
  <h2>Hello, <span id="userName"></span></h2>
  <p><strong>Calories:</strong> <span id="userCalories"></span></p>
  <p><strong>TDEE:</strong> <span id="userTDEE"></span></p>

  <!-- WATER TRACKING -->
  <div class="card">
    <h3>üíß Water Intake</h3>
    <p>Today: <strong><span id="waterCount">0</span> oz</strong></p>

    <div style="display:flex; gap:10px;">
      <button class="secondary" onclick="addWater(8)">+8 oz</button>
      <button class="secondary" onclick="addWater(16)">+16 oz</button>
      <button class="secondary" onclick="resetWater()">Reset</button>
    </div>

    <p class="small">Goal: 64‚Äì128 oz per day</p>
  </div>
</div>

  <div id="photos" class="card tab" style="display:none">
    <h2>Progress Photos</h2>
    <p class="small">Upload and track your transformation.</p>
  </div>

  <div id="nutrition" class="card tab" style="display:none">
    <h2>üçé Nutrition Plan</h2>
    <div id="nutritionPlan"></div>
  </div>

  <div id="workouts" class="card tab" style="display:none">
    <h2>üí™ Training Plan</h2>
    <div id="workoutPlan"></div>
  </div>
</div>

</div>

<script>
/* =========================================================
   GLOBAL STATE
========================================================= */
let currentUser = {};
let onboardingStep = 0;

/* =========================================================
   AUTH
========================================================= */
function login() {
  currentUser.email = email.value;
  showPage("onboardingPage");
  renderOnboarding();
}

/* =========================================================
   PAGE NAV
========================================================= */
function showPage(id) {
  document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function switchTab(tab) {
  document.querySelectorAll(".tab").forEach(t => t.style.display = "none");
  document.getElementById(tab).style.display = "block";
  document.querySelectorAll(".nav button").forEach(b => b.classList.remove("active"));
  event.target.classList.add("active");
}

/* =========================================================
   ONBOARDING (ORIGINAL FLOW PRESERVED)
========================================================= */
const onboardingSteps = [
  () => `
    <h2>Your Name</h2>
    <input id="nameInput" placeholder="Name">
    <button onclick="saveStep(()=>currentUser.name=nameInput.value)">Next</button>
  `,
  () => `
    <h2>Body Stats</h2>
    <input id="weight" placeholder="Weight (lbs)">
    <input id="height" placeholder="Height (in)">
    <input id="age" placeholder="Age">
    <select id="gender"><option>male</option><option>female</option></select>
    <button onclick="saveStep(()=>{
      currentUser.weight=+weight.value;
      currentUser.height=+height.value;
      currentUser.age=+age.value;
      currentUser.gender=gender.value;
    })">Next</button>
  `,
  () => `
    <h2>Goal</h2>
    <select id="goal">
      <option value="cut">Fat Loss</option>
      <option value="maintain">Maintenance</option>
      <option value="bulk">Muscle Gain</option>
    </select>
    <button onclick="saveStep(()=>currentUser.goal=goal.value)">Next</button>
  `,
  () => `
    <h2>Workout Days / Week</h2>
    <input type="range" id="days" min="2" max="6" value="4" oninput="dVal.innerText=days.value">
    <div id="dVal">4</div>
    <button onclick="saveStep(()=>currentUser.workoutDays=+days.value)">Next</button>
  `,
  () => `
    <h2>Equipment Access</h2>
    <select id="equipment" multiple>
      <option value="bodyweight">Bodyweight</option>
      <option value="dumbbells">Dumbbells</option>
      <option value="barbells">Barbells</option>
      <option value="gym">Full Gym</option>
    </select>
    <button onclick="saveStep(()=>{
      currentUser.equipment=[...equipment.selectedOptions].map(o=>o.value);
    })">Finish</button>
  `
];

function renderOnboarding() {
  onboardingCard.innerHTML = onboardingSteps[onboardingStep]();
}

function saveStep(fn) {
  fn();
  onboardingStep++;
  if (onboardingStep >= onboardingSteps.length) finishOnboarding();
  else renderOnboarding();
}

/* =========================================================
   CALCULATIONS
========================================================= */
function finishOnboarding() {
  const kg = currentUser.weight * 0.4536;
  const cm = currentUser.height * 2.54;
  const bmr = currentUser.gender === "male"
    ? (10 * kg + 6.25 * cm - 5 * currentUser.age + 5)
    : (10 * kg + 6.25 * cm - 5 * currentUser.age - 161);

  currentUser.tdee = Math.round(bmr * 1.55);
  currentUser.calories =
    currentUser.goal === "cut" ? currentUser.tdee - 500 :
    currentUser.goal === "bulk" ? currentUser.tdee + 300 :
    currentUser.tdee;

  localStorage.setItem("user", JSON.stringify(currentUser));
  loadDashboard();
}

/* =========================================================
   DASHBOARD LOAD
========================================================= */
/* =========================================================
   WATER TRACKING
========================================================= */

function getTodayKey() {
  return new Date().toISOString().split("T")[0];
}

function loadWater() {
  const log = JSON.parse(localStorage.getItem("waterLog") || "{}");
  return log[getTodayKey()] || 0;
}

function saveWater(amount) {
  const log = JSON.parse(localStorage.getItem("waterLog") || "{}");
  log[getTodayKey()] = amount;
  localStorage.setItem("waterLog", JSON.stringify(log));
}

function addWater(oz) {
  const current = loadWater() + oz;
  saveWater(current);
  updateWaterUI();
}

function resetWater() {
  saveWater(0);
  updateWaterUI();
}

function updateWaterUI() {
  const el = document.getElementById("waterCount");
  if (el) el.textContent = loadWater();
}
  function loadDashboard() {
  showPage("dashboardPage");

  userName.innerText = currentUser.name;
  userCalories.innerText = currentUser.calories;
  userTDEE.innerText = currentUser.tdee;

  document.getElementById("overview").innerHTML = `
    <h2>Welcome, ${currentUser.name}</h2>
    <p><strong>Goal:</strong> ${currentUser.goal.toUpperCase()}</p>
    <p><strong>Calories:</strong> ${currentUser.calories}</p>
    <p><strong>TDEE:</strong> ${currentUser.tdee}</p>
    <p><strong>Training Days:</strong> ${currentUser.workoutDays}/week</p>
    <p><strong>Program Split:</strong> ${getTrainingSplit(currentUser.workoutDays)}</p>
    <p class="small">Focus this phase: progressive overload & consistency</p>
  `;

  generateNutritionPlan();
  generateWorkoutPlan();
  updateWaterUI();
  }

/* =========================================================
   FOOD DATABASE (FULL, COST-AWARE)
========================================================= */
const FOODS = [

/* ================= ANIMAL PROTEINS ================= */
{name:"Chicken Breast",p:31,c:0,f:3,cost:"low"},
{name:"Chicken Thigh",p:26,c:0,f:9,cost:"low"},
{name:"Ground Turkey",p:22,c:0,f:8,cost:"low"},
{name:"Turkey Bacon",p:6,c:0,f:4,cost:"low"},
{name:"Eggs",p:12,c:2,f:10,cost:"low"},
{name:"Egg Whites",p:11,c:2,f:0,cost:"low"},
{name:"Canned Tuna",p:25,c:0,f:1,cost:"low"},
{name:"Sardines",p:22,c:0,f:13,cost:"medium"},
{name:"Salmon",p:22,c:0,f:12,cost:"medium"},
{name:"Cod",p:20,c:0,f:1,cost:"medium"},
{name:"Shrimp",p:20,c:1,f:1,cost:"medium"},
{name:"Lean Ground Beef",p:26,c:0,f:10,cost:"medium"},
{name:"Sirloin Steak",p:27,c:0,f:8,cost:"medium"},
{name:"Pork Loin",p:24,c:0,f:6,cost:"low"},
{name:"Bison",p:24,c:0,f:7,cost:"high"},
{name:"Venison",p:26,c:0,f:4,cost:"high"},
{name:"Lamb Chop",p:25,c:0,f:20,cost:"high"},
{name:"Duck Breast",p:23,c:0,f:11,cost:"high"},

/* ================= PLANT PROTEINS ================= */
{name:"Tofu",p:10,c:3,f:6,cost:"low"},
{name:"Tempeh",p:19,c:9,f:11,cost:"medium"},
{name:"Lentils",p:18,c:40,f:1,cost:"low"},
{name:"Chickpeas",p:15,c:45,f:4,cost:"low"},
{name:"Black Beans",p:15,c:41,f:1,cost:"low"},
{name:"Kidney Beans",p:15,c:40,f:1,cost:"low"},
{name:"Split Peas",p:16,c:41,f:1,cost:"low"},
{name:"Seitan",p:25,c:8,f:2,cost:"medium"},
{name:"Edamame",p:17,c:14,f:8,cost:"medium"},
{name:"Vegan Protein Powder",p:25,c:5,f:3,cost:"medium"},

/* ================= CARBS ================= */
{name:"White Rice",p:4,c:45,f:1,cost:"low"},
{name:"Brown Rice",p:5,c:45,f:2,cost:"low"},
{name:"Jasmine Rice",p:4,c:45,f:1,cost:"low"},
{name:"Basmati Rice",p:4,c:45,f:1,cost:"low"},
{name:"Oats",p:10,c:54,f:6,cost:"low"},
{name:"Sweet Potato",p:4,c:41,f:0,cost:"low"},
{name:"White Potato",p:4,c:37,f:0,cost:"low"},
{name:"Quinoa",p:8,c:39,f:4,cost:"medium"},
{name:"Whole Wheat Pasta",p:8,c:43,f:2,cost:"low"},
{name:"Couscous",p:6,c:36,f:0,cost:"medium"},
{name:"Farro",p:7,c:37,f:1,cost:"medium"},
{name:"Corn",p:5,c:41,f:2,cost:"low"},
{name:"Rice Cakes",p:2,c:14,f:0,cost:"low"},
{name:"Popcorn",p:3,c:19,f:1,cost:"low"},

/* ================= FATS ================= */
{name:"Olive Oil",p:0,c:0,f:14,cost:"medium"},
{name:"Avocado",p:3,c:12,f:21,cost:"medium"},
{name:"Peanut Butter",p:8,c:6,f:16,cost:"low"},
{name:"Almond Butter",p:7,c:6,f:18,cost:"medium"},
{name:"Walnuts",p:4,c:4,f:18,cost:"medium"},
{name:"Cashews",p:5,c:9,f:12,cost:"medium"},
{name:"Pumpkin Seeds",p:9,c:5,f:14,cost:"low"},
{name:"Chia Seeds",p:5,c:12,f:9,cost:"low"},
{name:"Flax Seeds",p:5,c:8,f:9,cost:"low"},
{name:"Ghee",p:0,c:0,f:14,cost:"high"},

/* ================= DAIRY ================= */
{name:"Greek Yogurt Nonfat",p:17,c:6,f:0,cost:"medium"},
{name:"Cottage Cheese",p:14,c:3,f:2,cost:"medium"},
{name:"Cheddar Cheese",p:7,c:1,f:9,cost:"medium"},
{name:"Milk 2%",p:8,c:12,f:5,cost:"low"},
{name:"Almond Milk",p:1,c:2,f:3,cost:"medium"},
{name:"Oat Milk",p:3,c:16,f:5,cost:"medium"},

/* ================= FRUITS ================= */
{name:"Banana",p:1,c:27,f:0,cost:"low"},
{name:"Apple",p:0,c:25,f:0,cost:"low"},
{name:"Orange",p:1,c:15,f:0,cost:"low"},
{name:"Blueberries",p:1,c:21,f:0,cost:"medium"},
{name:"Strawberries",p:1,c:11,f:0,cost:"medium"},
{name:"Mango",p:1,c:25,f:0,cost:"medium"},
{name:"Pineapple",p:1,c:22,f:0,cost:"medium"},
{name:"Grapes",p:1,c:18,f:0,cost:"medium"},
{name:"Peach",p:1,c:15,f:0,cost:"medium"},

/* ================= VEGETABLES ================= */
{name:"Broccoli",p:4,c:11,f:0,cost:"low"},
{name:"Spinach",p:2,c:4,f:0,cost:"low"},
{name:"Zucchini",p:2,c:4,f:0,cost:"low"},
{name:"Bell Peppers",p:1,c:9,f:0,cost:"medium"},
{name:"Asparagus",p:3,c:5,f:0,cost:"medium"},
{name:"Cauliflower",p:3,c:5,f:0,cost:"low"},
{name:"Green Beans",p:2,c:7,f:0,cost:"low"},
{name:"Carrots",p:1,c:12,f:0,cost:"low"},
{name:"Mushrooms",p:3,c:3,f:0,cost:"low"},
{name:"Brussels Sprouts",p:4,c:8,f:0,cost:"medium"}
];

/* =========================================================
   NUTRITION ENGINE
========================================================= */
function generateNutritionPlan() {
  const proteinTarget = Math.round(currentUser.weight);
  const fatTarget = Math.round(currentUser.calories * 0.25 / 9);
  const carbTarget = Math.round((currentUser.calories - (proteinTarget*4 + fatTarget*9)) / 4);

  function pickFood(filterFn) {
    const options = FOODS.filter(filterFn);
    return options[Math.floor(Math.random() * options.length)];
  }

  const breakfast = [
    pickFood(f => f.p >= 8 && f.c > 20),
    pickFood(f => f.c > 20),
  ];

  const lunch = [
    pickFood(f => f.p >= 20),
    pickFood(f => f.c >= 30),
    pickFood(f => f.c < 15 && f.p < 10),
  ];

  const dinner = [
    pickFood(f => f.p >= 20),
    pickFood(f => f.c >= 20),
    pickFood(f => f.c < 15),
  ];

  let html = `
    <p><strong>Daily Macros:</strong> ${proteinTarget}P / ${carbTarget}C / ${fatTarget}F</p>

    <div class="meal"><strong>üç≥ Breakfast</strong><br>
      ${breakfast.map(f => f.name).join("<br>")}
    </div>

    <div class="meal"><strong>ü•ó Lunch</strong><br>
      ${lunch.map(f => f.name).join("<br>")}
    </div>

    <div class="meal"><strong>üçΩ Dinner</strong><br>
      ${dinner.map(f => f.name).join("<br>")}
    </div>

    <p class="small">Rotate food choices weekly. Portions adjusted to hit macros.</p>
  `;

  nutritionPlan.innerHTML = html;
}

/* =========================================================
   EXERCISE LIBRARY (EXPANDED)
========================================================= */
const EXERCISES = [

/* ================= SQUAT ================= */
{name:"Bodyweight Squat",pattern:"squat",equipment:["bodyweight"]},
{name:"Goblet Squat",pattern:"squat",equipment:["dumbbells"]},
{name:"Barbell Back Squat",pattern:"squat",equipment:["barbells","gym"]},
{name:"Front Squat",pattern:"squat",equipment:["barbells","gym"]},
{name:"Box Squat",pattern:"squat",equipment:["barbells","gym"]},
{name:"Hack Squat",pattern:"squat",equipment:["gym"]},

/* ================= HINGE ================= */
{name:"Glute Bridge",pattern:"hinge",equipment:["bodyweight"]},
{name:"Hip Thrust",pattern:"hinge",equipment:["barbells","gym"]},
{name:"Romanian Deadlift",pattern:"hinge",equipment:["barbells","dumbbells"]},
{name:"Conventional Deadlift",pattern:"hinge",equipment:["barbells","gym"]},
{name:"Kettlebell Swing",pattern:"hinge",equipment:["dumbbells"]},

/* ================= LUNGE ================= */
{name:"Reverse Lunge",pattern:"lunge",equipment:["bodyweight","dumbbells"]},
{name:"Walking Lunge",pattern:"lunge",equipment:["dumbbells"]},
{name:"Bulgarian Split Squat",pattern:"lunge",equipment:["dumbbells"]},
{name:"Step Ups",pattern:"lunge",equipment:["dumbbells"]},
{name:"Single Leg Press",pattern:"lunge",equipment:["gym"]},

/* ================= PUSH ================= */
{name:"Push-Up",pattern:"push",equipment:["bodyweight"]},
{name:"Incline Push-Up",pattern:"push",equipment:["bodyweight"]},
{name:"Bench Press",pattern:"push",equipment:["barbells","gym"]},
{name:"Incline Bench Press",pattern:"push",equipment:["barbells","gym"]},
{name:"Dumbbell Bench Press",pattern:"push",equipment:["dumbbells"]},
{name:"Overhead Press",pattern:"push",equipment:["barbells","dumbbells"]},
{name:"Machine Chest Press",pattern:"push",equipment:["gym"]},

/* ================= PULL ================= */
{name:"Band Row",pattern:"pull",equipment:["bands"]},
{name:"Dumbbell Row",pattern:"pull",equipment:["dumbbells"]},
{name:"Barbell Row",pattern:"pull",equipment:["barbells","gym"]},
{name:"Lat Pulldown",pattern:"pull",equipment:["gym"]},
{name:"Pull-Up",pattern:"pull",equipment:["bodyweight","gym"]},
{name:"Seated Cable Row",pattern:"pull",equipment:["gym"]},
{name:"Face Pull",pattern:"pull",equipment:["bands","gym"]},

/* ================= ARMS ================= */
{name:"Dumbbell Curl",pattern:"arms",equipment:["dumbbells"]},
{name:"Hammer Curl",pattern:"arms",equipment:["dumbbells"]},
{name:"Barbell Curl",pattern:"arms",equipment:["barbells"]},
{name:"Preacher Curl",pattern:"arms",equipment:["gym"]},
{name:"Triceps Pushdown",pattern:"arms",equipment:["gym"]},
{name:"Overhead Triceps Extension",pattern:"arms",equipment:["dumbbells"]},
{name:"Skull Crushers",pattern:"arms",equipment:["barbells","dumbbells"]},

/* ================= CORE ================= */
{name:"Plank",pattern:"core",equipment:["bodyweight"]},
{name:"Side Plank",pattern:"core",equipment:["bodyweight"]},
{name:"Dead Bug",pattern:"core",equipment:["bodyweight"]},
{name:"Hanging Knee Raise",pattern:"core",equipment:["gym"]},
{name:"Cable Crunch",pattern:"core",equipment:["gym"]},
{name:"Russian Twist",pattern:"core",equipment:["bodyweight","dumbbells"]},

/* ================= CARDIO ================= */
{name:"Walking",pattern:"cardio",equipment:["none"]},
{name:"Incline Treadmill Walk",pattern:"cardio",equipment:["gym"]},
{name:"Cycling",pattern:"cardio",equipment:["bike"]},
{name:"Rowing Machine",pattern:"cardio",equipment:["gym"]},
{name:"Elliptical",pattern:"cardio",equipment:["gym"]},
{name:"Jump Rope",pattern:"cardio",equipment:["rope"]},
{name:"Battle Ropes",pattern:"cardio",equipment:["gym"]},

/* ================= CARRIES ================= */
{name:"Farmer Carry",pattern:"carry",equipment:["dumbbells"]},
{name:"Suitcase Carry",pattern:"carry",equipment:["dumbbells"]},
{name:"Overhead Carry",pattern:"carry",equipment:["dumbbells"]},
{name:"Sled Push",pattern:"carry",equipment:["gym"]}
];

/* =========================================================
   WORKOUT ENGINE
========================================================= */
function getTrainingSplit(days) {
  if (days <= 3) return "Full Body";
  if (days === 4) return "Upper / Lower";
  return "Push / Pull / Legs";
}

function generateWorkoutPlan() {
  const split = getTrainingSplit(currentUser.workoutDays);
  let days = [];

  if (split === "Full Body") {
    days = ["Full Body"];
  } else if (split === "Upper / Lower") {
    days = ["Upper Body", "Lower Body"];
  } else {
    days = ["Push", "Pull", "Legs"];
  }

  function pick(pattern) {
    return EXERCISES.filter(e =>
      e.pattern === pattern &&
      e.equipment.some(eq => currentUser.equipment.includes(eq))
    )[0];
  }

  let html = "";

  days.forEach(day => {
    html += `<div class="exercise"><strong>${day}</strong><br>`;

    if (day.includes("Full")) {
      html += `
        ${pick("squat").name} ‚Äì 4x8<br>
        ${pick("push").name} ‚Äì 4x8<br>
        ${pick("pull").name} ‚Äì 4x10<br>
        ${pick("hinge").name} ‚Äì 3x8<br>
        ${pick("core").name} ‚Äì 3x45s
      `;
    }

    if (day === "Upper Body") {
      html += `
        ${pick("push").name} ‚Äì 4x8<br>
        ${pick("pull").name} ‚Äì 4x10<br>
        ${pick("push").name} ‚Äì 3x10<br>
        ${pick("pull").name} ‚Äì 3x12
      `;
    }

    if (day === "Lower Body") {
      html += `
        ${pick("squat").name} ‚Äì 4x6<br>
        ${pick("hinge").name} ‚Äì 3x8<br>
        ${pick("lunge").name} ‚Äì 3x12<br>
        ${pick("core").name} ‚Äì 3x45s
      `;
    }

    if (day === "Push") {
      html += `
        ${pick("push").name} ‚Äì 4x6<br>
        ${pick("push").name} ‚Äì 3x10<br>
        Triceps Accessory ‚Äì 3x12
      `;
    }

    if (day === "Pull") {
      html += `
        ${pick("pull").name} ‚Äì 4x8<br>
        ${pick("pull").name} ‚Äì 3x12<br>
        Biceps Accessory ‚Äì 3x12
      `;
    }

    if (day === "Legs") {
      html += `
        ${pick("squat").name} ‚Äì 4x6<br>
        ${pick("hinge").name} ‚Äì 3x8<br>
        ${pick("lunge").name} ‚Äì 3x12
      `;
    }

    html += `</div>`;
  });

  html += `<p class="small">Progression: add 5 lbs or 1 rep when all sets are completed with good form.</p>`;

  workoutPlan.innerHTML = html;
}
  });
  html += `<p class="small">Progress weekly: +5 lbs or +1 rep per set</p>`;
  workoutPlan.innerHTML = html;
}
</script>
</body>
</html>
